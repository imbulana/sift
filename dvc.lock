schema: '2.0'
stages:
  clean:
    cmd: python src/prepare/clean.py data/raw
    deps:
    - path: data/raw
      hash: md5
      md5: 39b5180c9e28fce7dfbf2345090248b1.dir
      size: 116372816
      nfiles: 2
    - path: src/prepare/clean.py
      hash: md5
      md5: b7f90a3a5194b144aa0158337e31b92e
      size: 3803
    outs:
    - path: data/cleaned
      hash: md5
      md5: fda64548337956f9b4c2fc79ee0c2136.dir
      size: 99821112
      nfiles: 2
  collate:
    cmd: python src/prepare/collate.py data/redacted
    deps:
    - path: data/redacted
      hash: md5
      md5: 05d1c0ec941174bd88e46bf7b38443c9.dir
      size: 96649973
      nfiles: 2
    - path: src/prepare/collate.py
      hash: md5
      md5: 075f9c5c4e5e0a24a7baece2c1dffe62
      size: 1328
    params:
      params.yaml:
        prepare.seed: 42
    outs:
    - path: data/collated/data.csv
      hash: md5
      md5: a8ee15642e77d9eb17c55b58cf0d9dbc
      size: 92520291
  split:
    cmd: python src/prepare/split.py data/collated/data.csv
    deps:
    - path: data/collated/data.csv
      hash: md5
      md5: a8ee15642e77d9eb17c55b58cf0d9dbc
      size: 92520291
    - path: src/prepare/split.py
      hash: md5
      md5: a543b0bfb12d98b8b92faf6c01b3102f
      size: 1607
    params:
      params.yaml:
        prepare.seed: 42
        prepare.split: 0.2
    outs:
    - path: data/prepared
      hash: md5
      md5: fbcb37fc1d467c86a18c9b7f020ab504.dir
      size: 92520305
      nfiles: 2
  featurize:
    cmd: python src/featurize.py data/prepared data/features
    deps:
    - path: data/prepared
      hash: md5
      md5: fbcb37fc1d467c86a18c9b7f020ab504.dir
      size: 92520305
      nfiles: 2
    - path: src/featurize.py
      hash: md5
      md5: 61cfa41ef3fe3d76d3377a820cf2e7f2
      size: 4065
    params:
      params.yaml:
        featurize.max_features: 10
        featurize.ngrams: 2
    outs:
    - path: data/features
      hash: md5
      md5: 145b99ce99000a8fc8be0e08c3517578.dir
      size: 2882605
      nfiles: 2
  train:
    cmd: python src/train.py data/features model.pkl
    deps:
    - path: data/features
      hash: md5
      md5: 145b99ce99000a8fc8be0e08c3517578.dir
      size: 2882605
      nfiles: 2
    - path: src/train.py
      hash: md5
      md5: 324001573ed724e5ae092226fcf9ca30
      size: 1666
    params:
      params.yaml:
        train.min_split: 0.01
        train.n_est: 50
        train.seed: 42
    outs:
    - path: model.pkl
      hash: md5
      md5: 8a6cd2f4570d1170fbdb4883b82e92dc
      size: 1322189
  evaluate:
    cmd: python src/evaluate.py model.pkl data/features
    deps:
    - path: data/features
      hash: md5
      md5: 145b99ce99000a8fc8be0e08c3517578.dir
      size: 2882605
      nfiles: 2
    - path: model.pkl
      hash: md5
      md5: 8a6cd2f4570d1170fbdb4883b82e92dc
      size: 1322189
    - path: src/evaluate.py
      hash: md5
      md5: a1a59f55636170fb56e0c6afd3e28fa4
      size: 3315
    outs:
    - path: eval
      hash: md5
      md5: eff4c09a741acd854ba1b92431c20622.dir
      size: 6116745
      nfiles: 8
  redact:
    cmd: python src/prepare/redact.py data/cleaned
    deps:
    - path: data/cleaned
      hash: md5
      md5: fda64548337956f9b4c2fc79ee0c2136.dir
      size: 99821112
      nfiles: 2
    - path: src/prepare/redact.py
      hash: md5
      md5: decafee7d77fbbe6461b58c4ff31b3a9
      size: 1923
    outs:
    - path: data/redacted
      hash: md5
      md5: 05d1c0ec941174bd88e46bf7b38443c9.dir
      size: 96649973
      nfiles: 2
